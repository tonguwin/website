---
import BaseLayout from "../layouts/BaseLayout.astro";

// Get content from organized gallery folders
import { readdirSync } from 'fs';
import { join } from 'path';

// Helper to read files from a folder
function getFilesFromFolder(folder: string, extensions: RegExp): string[] {
  try {
    const folderPath = join(process.cwd(), 'public', 'gallery', folder);
    const files = readdirSync(folderPath);
    return files
      .filter(file => extensions.test(file))
      .map(file => `/gallery/${folder}/${file}`);
  } catch (e) {
    return [];
  }
}

// Read from each folder
const jpgFiles = getFilesFromFolder('jpg', /\.(jpg|jpeg)$/i);
const pngFiles = getFilesFromFolder('png', /\.(png)$/i);
const mp4Files = getFilesFromFolder('mp4', /\.(mp4|webm|mov)$/i);
const bookFiles = getFilesFromFolder('books', /\.(jpg|jpeg|png|webp)$/i);

// Helper to extract filename without extension
function getFileName(src: string): string {
  return src.split('/').pop()?.replace(/\.[^/.]+$/, '') || 'untitled';
}

// Create typed content items
const jpgItems = jpgFiles.map((src, i) => ({
  type: 'jpg' as const,
  category: 'jpg',
  src,
  name: getFileName(src),
  index: i,
  size: ['sm', 'md', 'lg'][Math.floor(Math.random() * 3)],
  rotation: (Math.random() - 0.5) * 6,
  delay: Math.random() * 1.5
}));

const pngItems = pngFiles.map((src, i) => ({
  type: 'png' as const,
  category: 'png',
  src,
  name: getFileName(src),
  index: i,
  size: ['sm', 'md', 'lg'][Math.floor(Math.random() * 3)],
  rotation: (Math.random() - 0.5) * 6,
  delay: Math.random() * 1.5
}));

const mp4Items = mp4Files.map((src, i) => ({
  type: 'mp4' as const,
  category: 'mp4',
  src,
  name: getFileName(src),
  index: i,
  size: ['sm', 'md', 'lg'][Math.floor(Math.random() * 3)],
  rotation: (Math.random() - 0.5) * 4,
  delay: Math.random() * 1.5
}));

const bookItems = bookFiles.map((src, i) => ({
  type: 'book' as const,
  category: 'books',
  src,
  name: getFileName(src),
  index: i,
  size: ['sm', 'md', 'lg'][Math.floor(Math.random() * 3)],
  rotation: (Math.random() - 0.5) * 4,
  delay: Math.random() * 1.5
}));

// Quotes collection - add your quotes here
const quoteItems = [
  { text: "Let me begin again.", author: "Ocean Vuong", source: "" },
  { text: "Eat it while it's hot!", author: "Ba", source: "" },
].map((q, i) => ({
  type: 'quote' as const,
  category: 'quotes',
  ...q,
  index: i,
  size: ['sm', 'md', 'lg'][Math.floor(Math.random() * 3)],
  rotation: (Math.random() - 0.5) * 4,
  delay: Math.random() * 1.5,
  glitchOffset: Math.abs(Math.sin((i + 1) * 47.3)) * 3,
}));

// Combined and shuffled content for "all" mode
// NOTE: quoteItems removed for now - add back when ready: [...jpgItems, ...pngItems, ...mp4Items, ...bookItems, ...quoteItems]
const allContent = [...jpgItems, ...pngItems, ...mp4Items, ...bookItems]
  .sort(() => Math.random() - 0.5)
  .map((item, i) => ({
    ...item,
    globalIndex: i
  }));

// Content counts for nav badges
const counts = {
  all: allContent.length,
  jpg: jpgItems.length,
  png: pngItems.length,
  mp4: mp4Items.length,
  books: bookItems.length,
  // quotes: quoteItems.length, // Disabled for now
};

// ASCII art patterns - more variety
const asciiPatterns = [
  ` /\\_/\\  
( o.o ) 
 > ^ <`,
  `  \\  |  /
 '.  \\|/  .'
--  --*--  --
 '.  /|\\  .'
   /  |  \\`,
  `      .--.
  .-(    ).
 (___.__)__)`,
  `  *  
 ***
*****
 ***
  *`,
  `░░░░░
░   ░
░░░░░`,
  `▓▓▓
▓ ▓
▓▓▓`,
  `◆ ◇ ◆
◇ ◆ ◇
◆ ◇ ◆`,
  `█▀▀█
█  █
█▄▄█`,
  `╔═╗
║░║
╚═╝`,
  `┌─┐
│●│
└─┘`,
  `⊕ ⊖ ⊕`,
  `▲
▲ ▲`,
  `○ ○ ○
 ○ ○
○ ○ ○`,
  `◢◤
◥◣`,
  `┼┼┼
┼┼┼`,
  `░▒▓█`,
  `▀▄▀▄▀`,
  `╳ ╳ ╳`,
  `◐◓◑◒`,
  `⬡ ⬢ ⬡`,
  `∴ ∵ ∴`,
  `⌐■-■`,
  `[::::]`,
  `{•_•}`,
  `<○>`,
  `|||||`,
  `═══`,
  `~~~`,
  `•••`,
  `>>>`,
];

// Generate ASCII positions using explicit grid + offset for guaranteed spread
const asciiPositions: Array<{pattern: string, x: number, y: number, delay: number, duration: number, size: number}> = [];

// Create a 10x10 grid to ensure full coverage
for (let row = 0; row < 10; row++) {
  for (let col = 0; col < 10; col++) {
    const i = row * 10 + col;
    // Base position from grid, plus small random offset
    const baseX = col * 10; // 0, 10, 20, 30... 90
    const baseY = row * 10; // 0, 10, 20, 30... 90
    // Add pseudo-random offset (0-8%) using sin for variety
    const offsetX = Math.abs(Math.sin((i + 1) * 127.1)) * 8;
    const offsetY = Math.abs(Math.sin((i + 1) * 311.7)) * 8;
    
    asciiPositions.push({
      pattern: asciiPatterns[i % asciiPatterns.length],
      x: baseX + offsetX,
      y: baseY + offsetY,
      delay: Math.abs(Math.sin((i + 1) * 73.3)) * 15,
      duration: 12 + Math.abs(Math.sin((i + 1) * 47.9)) * 12,
      size: 6 + Math.abs(Math.sin((i + 1) * 23.1)) * 6
    });
  }
}
---

<BaseLayout title="Gallery">
  <div class="gallery-page" id="galleryPage">
    <!-- Scan lines -->
    <div class="scanlines"></div>
    
    <!-- Unified grain texture over EVERYTHING -->
    <div class="grain-overlay"></div>
    
    <!-- Floating ASCII background - 10x10 grid = 100 elements spread across entire page -->
    <div class="ascii-layer" id="asciiLayer">
      {asciiPositions.map(({ pattern, x, y, delay, duration, size }) => (
        <pre 
          class="floating-ascii"
          style={`left: ${x}%; top: ${y}%; animation-delay: ${delay}s; animation-duration: ${duration}s; font-size: ${size}px;`}
        >{pattern}</pre>
      ))}
    </div>
    
    <!-- Extra ASCII layer on TOP of images - 6x6 grid = 36 elements -->
    <div class="ascii-top-layer">
      {Array.from({ length: 36 }, (_, i) => {
        const row = Math.floor(i / 6);
        const col = i % 6;
        const baseX = col * 16 + 2; // 2, 18, 34, 50, 66, 82
        const baseY = row * 16 + 2; // spread vertically too
        const offsetX = Math.abs(Math.sin((i + 50) * 89.3)) * 12;
        const offsetY = Math.abs(Math.sin((i + 50) * 197.7)) * 12;
        return {
          pattern: asciiPatterns[(i * 3) % asciiPatterns.length],
          x: baseX + offsetX,
          y: baseY + offsetY,
          delay: Math.abs(Math.sin((i + 50) * 41.1)) * 10,
          duration: 14 + Math.abs(Math.sin((i + 50) * 67.9)) * 12
        };
      }).map(({ pattern, x, y, delay, duration }) => (
        <pre 
          class="floating-ascii-top"
          style={`left: ${x}%; top: ${y}%; animation-delay: ${delay}s; animation-duration: ${duration}s;`}
        >{pattern}</pre>
      ))}
    </div>

    <!-- Foreground floating ASCII (on top of images) -->
    <div class="ascii-foreground" id="asciiForeground"></div>

    <!-- Glitchy Navigation -->
    <nav class="gallery-nav" id="galleryNav">
      <div class="nav-container">
        <button class="nav-btn active" data-mode="all">
          <span class="nav-text">[ALL]</span>
          <span class="nav-count">{counts.all}</span>
          <span class="nav-glitch"></span>
        </button>
        <span class="nav-divider">│</span>
        <button class="nav-btn" data-mode="jpg">
          <span class="nav-text">JPG</span>
          <span class="nav-count">{counts.jpg}</span>
          <span class="nav-glitch"></span>
        </button>
        <span class="nav-divider">│</span>
        <button class="nav-btn" data-mode="png">
          <span class="nav-text">PNG</span>
          <span class="nav-count">{counts.png}</span>
          <span class="nav-glitch"></span>
        </button>
        <span class="nav-divider">│</span>
        <button class="nav-btn" data-mode="mp4">
          <span class="nav-text">MP4</span>
          <span class="nav-count">{counts.mp4}</span>
          <span class="nav-glitch"></span>
        </button>
        <span class="nav-divider">│</span>
        <button class="nav-btn" data-mode="books">
          <span class="nav-text">BOOKS</span>
          <span class="nav-count">{counts.books}</span>
          <span class="nav-glitch"></span>
        </button>
        <!-- QUOTES button disabled for now
        <span class="nav-divider">│</span>
        <button class="nav-btn" data-mode="quotes">
          <span class="nav-text">QUOTES</span>
          <span class="nav-count">{counts.quotes}</span>
          <span class="nav-glitch"></span>
        </button>
        -->
      </div>
    </nav>

    <!-- Gallery -->
    <main class="gallery-main">
      {allContent.length === 0 ? (
        <div class="empty-state">
          <pre class="ascii-box">
{`┌──────────────────────────────┐
│                              │
│   ░░░ NO CONTENT FOUND ░░░   │
│                              │
│   Add files to:              │
│   /public/gallery/jpg/       │
│   /public/gallery/png/       │
│   /public/gallery/mp4/       │
│   /public/gallery/books/     │
│                              │
└──────────────────────────────┘`}
          </pre>
        </div>
      ) : (
        <div class="gallery-grid" id="contentGrid">
          {allContent.map((item) => (
            /* JPG or PNG Images */
            (item.type === 'jpg' || item.type === 'png') ? (
              <article 
                class={`gallery-item size-${item.size}`}
                data-type={item.type}
                data-category={item.category}
                data-index={item.index}
                data-src={item.src}
                style={`--rotation: ${item.rotation}deg; --delay: ${item.delay}s;`}
              >
                <div class="image-container">
                  <img src={item.src} alt="" loading="lazy" />
                  <div class="image-overlay"></div>
                  <div class="glitch-layer glitch-layer-1" style={`background-image: url(${item.src}); background-size: cover; border-radius: 6px;`}></div>
                  <div class="glitch-layer glitch-layer-2" style={`background-image: url(${item.src}); background-size: cover; border-radius: 6px;`}></div>
                  <div class="image-glow"></div>
                  <div class="corner tl"></div>
                  <div class="corner tr"></div>
                  <div class="corner bl"></div>
                  <div class="corner br"></div>
                </div>
                <div class="image-index">{item.name}</div>
              </article>
            ) : 
            /* MP4 Videos */
            item.type === 'mp4' ? (
              <article 
                class={`gallery-item video-card size-${item.size}`}
                data-type="mp4"
                data-category="mp4"
                data-index={item.index}
                data-src={item.src}
                style={`--rotation: ${item.rotation}deg; --delay: ${item.delay}s;`}
              >
                <div class="image-container video-box">
                  <video src={item.src} loop muted playsinline preload="metadata"></video>
                  <div class="video-play-icon">▶</div>
                  <div class="corner tl"></div>
                  <div class="corner tr"></div>
                  <div class="corner bl"></div>
                  <div class="corner br"></div>
                </div>
                <div class="image-index">{item.name}</div>
              </article>
            ) :
            /* Books */
            item.type === 'book' ? (
              <article 
                class={`gallery-item book-card size-${item.size}`}
                data-type="book"
                data-category="books"
                data-index={item.index}
                data-src={item.src}
                style={`--rotation: ${item.rotation}deg; --delay: ${item.delay}s;`}
              >
                <div class="image-container book-box">
                  <img src={item.src} alt="" loading="lazy" />
                  <div class="book-spine"></div>
                  <div class="corner tl"></div>
                  <div class="corner tr"></div>
                  <div class="corner bl"></div>
                  <div class="corner br"></div>
                </div>
                <div class="image-index">{item.name}</div>
              </article>
            ) :
            /* Quotes */
            item.type === 'quote' ? (
              <article 
                class={`gallery-item quote-card size-${item.size}`}
                data-type="quote"
                data-category="quotes"
                data-index={item.index}
                style={`--rotation: ${item.rotation}deg; --delay: ${item.delay}s; --glitch-offset: ${item.glitchOffset}px;`}
              >
                <div class="image-container quote-box">
                  <div class="quote-inner">
                    <span class="quote-mark-large">"</span>
                    <blockquote class="quote-text-card">{item.text}</blockquote>
                    <div class="quote-attribution-card">
                      <cite class="quote-author-card">{item.author}</cite>
                      {item.source && <span class="quote-source-card">{item.source}</span>}
                    </div>
                  </div>
                  <div class="quote-glitch-overlay"></div>
                  <div class="corner tl"></div>
                  <div class="corner tr"></div>
                  <div class="corner bl"></div>
                  <div class="corner br"></div>
                </div>
                <div class="image-index">{item.author}</div>
              </article>
            ) : null
          ))}
        </div>
      )}
    </main>

    <!-- Footer with Larvitar -->
    <footer class="gallery-footer">
      <a href="/" class="larvitar-home-link">
        <div class="larvitar-wrapper">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" width="80" height="80" class="larvitar-svg">
            <path d="M44,28 h4 v4 h-4 z" fill="#9CB18C" />
            <path d="M48,32 h4 v4 h-4 z" fill="#9CB18C" />
            <path d="M50,36 h4 v4 h-4 z" fill="#9CB18C" />
            <path d="M48,40 h4 v4 h-4 z" fill="#9CB18C" />
            <path d="M28,4 h8 v4 h-8 z" fill="#9CB18C" />
            <path d="M30,0 h4 v4 h-4 z" fill="#9CB18C" />
            <path d="M20,8 h24 v20 h-24 z" fill="#A8C090" />
            <path d="M16,28 h32 v24 h-32 z" fill="#A8C090" />
            <path d="M28,32 h8 v4 h-8 z" fill="#C65D4A" />
            <path d="M26,36 h12 v6 h-12 z" fill="#C65D4A" />
            <path d="M28,42 h8 v4 h-8 z" fill="#C65D4A" />
            <path d="M20,40 h4 v4 h-4 z" fill="#2D2D2D" />
            <path d="M40,40 h4 v4 h-4 z" fill="#2D2D2D" />
            <g class="larvitar-eyes-awake">
              <path d="M24,16 h6 v6 h-6 z" fill="#FFFFFF" />
              <path d="M34,16 h6 v6 h-6 z" fill="#FFFFFF" />
              <circle cx="27" cy="19" r="2" fill="#C44" />
              <circle cx="37" cy="19" r="2" fill="#C44" />
            </g>
            <g class="larvitar-eyes-happy">
              <path d="M24,18 h6 v2 h-6 z" fill="#2D2D2D" />
              <path d="M34,18 h6 v2 h-6 z" fill="#2D2D2D" />
            </g>
            <path d="M12,32 h4 v10 h-4 z" fill="#A8C090" />
            <path d="M48,32 h4 v10 h-4 z" fill="#A8C090" />
            <path d="M18,50 h4 v4 h-4 z" fill="#FFFFFF" />
            <path d="M24,50 h4 v4 h-4 z" fill="#FFFFFF" />
            <path d="M36,50 h4 v4 h-4 z" fill="#FFFFFF" />
            <path d="M42,50 h4 v4 h-4 z" fill="#FFFFFF" />
          </svg>
          <div class="heart-container">
            <span class="heart">♥</span>
            <span class="heart">♥</span>
          </div>
        </div>
        <span class="home-text">← back home</span>
      </a>
    </footer>

    <!-- Modal -->
    <div class="modal-overlay" id="modalOverlay">
      <div class="modal-content">
        <button class="modal-close" id="modalClose">×</button>
        <div class="modal-frame">
          <img id="modalImage" src="" alt="" />
          <div class="modal-info">
            <span class="modal-title" id="plaqueTitle">—</span>
            <span class="modal-number" id="plaqueNumber">#000</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</BaseLayout>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap');

  .gallery-page {
    min-height: 100vh;
    background: rgb(var(--color-primary));
    position: relative;
    overflow-x: hidden;
  }

  /* Scan lines */
  .scanlines {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 1001;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgb(var(--color-secondary) / 0.008) 2px,
      rgb(var(--color-secondary) / 0.008) 4px
    );
  }

  /* Unified grain texture - ties everything together */
  .grain-overlay {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 1000;
    opacity: 0.5;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='grain'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='5' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23grain)'/%3E%3C/svg%3E");
    mix-blend-mode: overlay;
  }

  /* ===== NAVIGATION ===== */
  .gallery-nav {
    position: sticky;
    top: 0;
    z-index: 100;
    padding: 1.5rem 2rem;
    background: rgb(var(--color-primary) / 0.9);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid rgb(var(--color-secondary) / 0.1);
  }

  .nav-container {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    font-family: 'Space Mono', monospace;
  }

  .nav-btn {
    position: relative;
    background: transparent;
    border: none;
    padding: 0.75rem 1.5rem;
    cursor: pointer;
    font-family: 'Space Mono', monospace;
    font-size: 0.875rem;
    letter-spacing: 0.15em;
    color: rgb(var(--color-secondary) / 0.5);
    transition: all 0.3s ease;
    overflow: hidden;
  }

  .nav-btn::before {
    content: '';
    position: absolute;
    inset: 0;
    border: 1px solid transparent;
    transition: all 0.3s ease;
  }

  .nav-btn:hover::before,
  .nav-btn.active::before {
    border-color: rgb(var(--color-secondary) / 0.3);
  }

  .nav-btn:hover,
  .nav-btn.active {
    color: rgb(var(--color-secondary));
  }

  .nav-btn.active {
    background: rgb(var(--color-secondary) / 0.05);
  }

  .nav-text {
    position: relative;
    display: inline-block;
  }

  .nav-count {
    font-size: 0.6rem;
    color: rgb(var(--color-secondary) / 0.3);
    margin-left: 0.25rem;
    font-weight: 400;
  }

  .nav-btn.active .nav-count,
  .nav-btn:hover .nav-count {
    color: rgb(var(--color-secondary) / 0.6);
  }

  .nav-btn:hover .nav-text,
  .nav-btn.active .nav-text {
    animation: nav-glitch 0.3s ease;
  }

  @keyframes nav-glitch {
    0%, 100% { transform: translate(0); }
    20% { transform: translate(-2px, 1px); }
    40% { transform: translate(2px, -1px); }
    60% { transform: translate(-1px, -1px); }
    80% { transform: translate(1px, 1px); }
  }

  .nav-glitch {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgb(var(--color-secondary) / 0.03) 50%,
      transparent 100%
    );
    transform: translateX(-100%);
    transition: transform 0.5s ease;
  }

  .nav-btn:hover .nav-glitch {
    transform: translateX(100%);
  }

  .nav-divider {
    color: rgb(var(--color-secondary) / 0.2);
    font-size: 0.75rem;
  }

  /* ===== QUOTE CARDS (Square like images) ===== */
  .quote-card .quote-box {
    background: rgb(var(--color-secondary) / 0.03);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1.5rem;
    position: relative;
  }

  .quote-inner {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    height: 100%;
    width: 100%;
    position: relative;
    z-index: 2;
  }

  .quote-mark-large {
    font-family: 'Space Mono', monospace;
    font-size: 3rem;
    line-height: 1;
    color: rgb(var(--color-secondary) / 0.15);
    position: absolute;
    top: 0;
    left: 0;
  }

  .quote-text-card {
    font-family: 'Space Mono', monospace;
    font-size: 0.8rem;
    line-height: 1.5;
    color: rgb(var(--color-secondary));
    margin: 0;
    padding: 1rem 0.5rem;
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 5;
    -webkit-box-orient: vertical;
  }

  .quote-attribution-card {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 0.5rem;
    background: linear-gradient(to top, rgb(var(--color-primary)) 50%, transparent);
  }

  .quote-author-card {
    display: block;
    font-family: 'Space Mono', monospace;
    font-size: 0.6rem;
    font-style: normal;
    font-weight: 700;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: rgb(var(--color-secondary) / 0.7);
  }

  .quote-source-card {
    display: block;
    font-family: 'Space Mono', monospace;
    font-size: 0.5rem;
    color: rgb(var(--color-secondary) / 0.4);
    letter-spacing: 0.1em;
    margin-top: 0.15rem;
  }

  /* Quote card glitch effect */
  .quote-glitch-overlay {
    position: absolute;
    inset: 0;
    pointer-events: none;
    opacity: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgb(var(--color-secondary) / 0.03) 2px,
      rgb(var(--color-secondary) / 0.03) 4px
    );
    z-index: 3;
  }

  .quote-card:hover .quote-glitch-overlay {
    opacity: 1;
    animation: quote-scan 0.5s ease infinite;
  }

  @keyframes quote-scan {
    0%, 100% { 
      clip-path: polygon(0 0, 100% 0, 100% 30%, 0 30%);
    }
    50% { 
      clip-path: polygon(0 70%, 100% 70%, 100% 100%, 0 100%);
    }
  }

  /* Quote card hover - same as images */
  .quote-card:hover .quote-box {
    background: rgb(var(--color-secondary) / 0.06);
  }

  .quote-card:hover .quote-text-card {
    animation: text-glitch 0.3s ease;
  }

  @keyframes text-glitch {
    0%, 100% { transform: translate(0); }
    20% { transform: translate(-1px, 1px); }
    40% { transform: translate(1px, -1px); }
    60% { transform: translate(-1px, 0); }
    80% { transform: translate(1px, 1px); }
  }

  /* Apply same monochrome/blend effect to quote cards */
  .quote-card .image-container {
    background: rgb(var(--color-primary));
  }

  /* ===== VIDEO CARDS ===== */
  .video-card .video-box {
    position: relative;
    overflow: hidden;
    background: rgb(var(--color-primary));
  }

  .video-card video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 20px;
    /* Same monochrome treatment as images */
    mix-blend-mode: luminosity;
    filter: contrast(0.9) brightness(0.88);
    opacity: 0.75;
    /* Feathered edges like images */
    mask-image: radial-gradient(ellipse 85% 85% at center, black 40%, transparent 95%);
    -webkit-mask-image: radial-gradient(ellipse 85% 85% at center, black 40%, transparent 95%);
    transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .video-card:hover .video-box {
    background: transparent;
    box-shadow: 0 10px 40px rgb(var(--color-secondary) / 0.1);
  }

  .video-card:hover video {
    mix-blend-mode: normal;
    filter: contrast(1.02) brightness(1) saturate(1.08);
    opacity: 1;
    mask-image: none;
    -webkit-mask-image: none;
  }

  .video-play-icon {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 1.5rem;
    color: rgb(var(--color-secondary) / 0.5);
    background: rgb(var(--color-primary) / 0.7);
    width: 2.5rem;
    height: 2.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    border: 1px solid rgb(var(--color-secondary) / 0.15);
    transition: all 0.3s ease;
    pointer-events: none;
    z-index: 5;
  }

  .video-card:hover .video-play-icon {
    opacity: 0;
    transform: translate(-50%, -50%) scale(1.5);
  }

  /* ===== BOOK CARDS ===== */
  .book-card .book-box {
    position: relative;
    background: rgb(var(--color-primary));
  }

  .book-card img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 20px;
    /* Same monochrome treatment as images */
    mix-blend-mode: luminosity;
    filter: contrast(0.9) brightness(0.88);
    opacity: 0.75;
    /* Feathered edges like images */
    mask-image: radial-gradient(ellipse 85% 85% at center, black 40%, transparent 95%);
    -webkit-mask-image: radial-gradient(ellipse 85% 85% at center, black 40%, transparent 95%);
    transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .book-card:hover .book-box {
    background: transparent;
    box-shadow: 0 10px 40px rgb(var(--color-secondary) / 0.1);
  }

  .book-card:hover img {
    mix-blend-mode: normal;
    filter: contrast(1.02) brightness(1) saturate(1.08);
    opacity: 1;
    mask-image: none;
    -webkit-mask-image: none;
  }

  .book-spine {
    position: absolute;
    left: 8%;
    top: 0;
    bottom: 0;
    width: 3px;
    background: linear-gradient(
      to bottom,
      transparent 5%,
      rgb(var(--color-secondary) / 0.1) 10%,
      rgb(var(--color-secondary) / 0.15) 50%,
      rgb(var(--color-secondary) / 0.1) 90%,
      transparent 95%
    );
    pointer-events: none;
    z-index: 5;
    opacity: 0.5;
    transition: opacity 0.4s ease;
  }

  .book-card:hover .book-spine {
    opacity: 1;
    background: linear-gradient(
      to bottom,
      transparent 5%,
      rgb(var(--color-secondary) / 0.2) 10%,
      rgb(var(--color-secondary) / 0.25) 50%,
      rgb(var(--color-secondary) / 0.2) 90%,
      transparent 95%
    );
  }

  /* Floating ASCII background layer */
  .ascii-layer {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    overflow: hidden;
  }

  .floating-ascii {
    position: absolute;
    font-family: 'Space Mono', monospace;
    line-height: 1.2;
    color: rgb(var(--color-secondary) / 0.07);
    white-space: pre;
    animation-name: float-drift;
    animation-timing-function: ease-in-out;
    animation-iteration-count: infinite;
    transform-origin: center;
  }

  @keyframes float-drift {
    0%, 100% {
      transform: translate(0, 0) rotate(0deg);
      opacity: 0.5;
    }
    25% {
      transform: translate(30px, -40px) rotate(3deg);
      opacity: 1;
    }
    50% {
      transform: translate(-20px, 30px) rotate(-2deg);
      opacity: 0.6;
    }
    75% {
      transform: translate(25px, 15px) rotate(2deg);
      opacity: 0.9;
    }
  }

  /* ASCII layer on TOP of images */
  .ascii-top-layer {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 50;
    overflow: hidden;
  }

  .floating-ascii-top {
    position: absolute;
    font-family: 'Space Mono', monospace;
    font-size: 10px;
    line-height: 1.2;
    color: rgb(var(--color-secondary) / 0.12);
    white-space: pre;
    animation-name: float-drift-top;
    animation-timing-function: ease-in-out;
    animation-iteration-count: infinite;
  }

  @keyframes float-drift-top {
    0%, 100% {
      transform: translate(0, 0) rotate(0deg) scale(1);
      opacity: 0.3;
    }
    30% {
      transform: translate(-25px, 20px) rotate(-2deg) scale(1.1);
      opacity: 0.8;
    }
    60% {
      transform: translate(20px, -15px) rotate(2deg) scale(0.95);
      opacity: 0.5;
    }
  }

  /* Foreground ASCII (spawned dynamically on scroll) */
  .ascii-foreground {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 100;
    overflow: hidden;
  }

  .ascii-foreground pre {
    position: absolute;
    font-family: 'Space Mono', monospace;
    font-size: 12px;
    line-height: 1.2;
    color: rgb(var(--color-secondary) / 0.15);
    white-space: pre;
    animation: ascii-pop 3s ease-out forwards;
  }

  @keyframes ascii-pop {
    0% {
      opacity: 0;
      transform: scale(0.5) rotate(-5deg);
    }
    20% {
      opacity: 1;
      transform: scale(1) rotate(0deg);
    }
    80% {
      opacity: 0.8;
      transform: scale(1.1) translateY(-20px) rotate(2deg);
    }
    100% {
      opacity: 0;
      transform: scale(0.8) translateY(-40px) rotate(-3deg);
    }
  }

  /* Gallery main */
  .gallery-main {
    position: relative;
    z-index: 1;
    padding: 6rem 4vw 8rem;
    min-height: 80vh;
  }

  .gallery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 4rem 3rem;
    max-width: 1500px;
    margin: 0 auto;
  }

  /* Gallery Items */
  .gallery-item {
    position: relative;
    transform: rotate(var(--rotation));
    transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1), z-index 0s 0.5s;
    animation: fadeIn 0.8s ease-out backwards;
    animation-delay: var(--delay);
    cursor: pointer;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: rotate(var(--rotation)) translateY(40px) scale(0.95);
    }
  }

  .gallery-item:hover {
    transform: rotate(0deg) scale(1.03) translateY(-6px);
    z-index: 50;
    transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1), z-index 0s;
  }

  /* Uniform sizes - all same column span */
  .size-sm,
  .size-md,
  .size-lg {
    grid-column: span 1;
  }

  .image-container {
    position: relative;
    overflow: visible;
    border-radius: 20px;
    aspect-ratio: 1 / 1;
    /* Solid theme color background - this IS the color source */
    background: rgb(var(--color-primary));
    /* No shadow - completely seamless */
    box-shadow: none;
    transition: box-shadow 0.4s ease, background 0.5s ease;
  }

  .image-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    border-radius: 20px;
    /* Image provides ONLY luminosity - color comes from background */
    mix-blend-mode: luminosity;
    /* Much softer - really blends into the page */
    filter: contrast(0.9) brightness(0.88);
    opacity: 0.75;
    /* Aggressive feathered edges - heavy dissolve */
    mask-image: radial-gradient(ellipse 85% 85% at center, black 40%, transparent 95%);
    -webkit-mask-image: radial-gradient(ellipse 85% 85% at center, black 40%, transparent 95%);
    transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
  }

  /* Overlay not needed for monotone - keeping for hover transition */
  .image-overlay {
    position: absolute;
    inset: 0;
    border-radius: 8px;
    background: transparent;
    pointer-events: none;
    transition: background 0.5s cubic-bezier(0.16, 1, 0.3, 1);
  }

  /* Digital glitch layers */
  .glitch-layer {
    position: absolute;
    inset: 0;
    border-radius: 8px;
    opacity: 0;
    pointer-events: none;
    z-index: 2;
    transition: opacity 0.3s ease;
  }

  .glitch-layer-1 {
    filter: url(#glitch-r);
  }

  .glitch-layer-2 {
    filter: url(#glitch-c);
  }

  /* On hover: reveal full original color */
  .gallery-item:hover .image-container {
    background: transparent;
    box-shadow: 0 10px 40px rgb(var(--color-secondary) / 0.1);
  }

  .gallery-item:hover .image-container img {
    mix-blend-mode: normal;
    filter: contrast(1.02) brightness(1) saturate(1.08);
    opacity: 1;
    /* Restore sharp edges on hover */
    mask-image: none;
    -webkit-mask-image: none;
  }

  .gallery-item:hover .glitch-layer {
    mix-blend-mode: screen;
    animation: digital-glitch 0.4s steps(3) infinite;
  }

  .gallery-item:hover .glitch-layer-1 {
    opacity: 0.15;
  }

  .gallery-item:hover .glitch-layer-2 {
    opacity: 0.12;
    animation-delay: 0.15s;
  }

  @keyframes digital-glitch {
    0%, 100% {
      transform: translate(0, 0);
      clip-path: inset(0 0 0 0);
    }
    25% {
      transform: translate(-1px, 0);
      clip-path: inset(10% 0 80% 0);
    }
    50% {
      transform: translate(1px, 0);
      clip-path: inset(40% 0 45% 0);
    }
    75% {
      transform: translate(-1px, 0);
      clip-path: inset(70% 0 15% 0);
    }
  }

  /* Glow on hover */
  .image-glow {
    position: absolute;
    inset: -12px;
    border-radius: 14px;
    opacity: 0;
    transition: opacity 0.4s ease;
    pointer-events: none;
    z-index: -1;
  }

  .gallery-item:hover .image-glow {
    opacity: 1;
  }

  /* Corner brackets - very subtle */
  .corner {
    position: absolute;
    width: 12px;
    height: 12px;
    border: 1px solid rgb(var(--color-secondary) / 0.05);
    transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    z-index: 10;
    opacity: 0;
  }

  .gallery-item:hover .corner {
    border-color: rgb(var(--color-secondary) / 0.4);
    opacity: 1;
  }

  .tl { top: -4px; left: -4px; border-right: none; border-bottom: none; }
  .tr { top: -4px; right: -4px; border-left: none; border-bottom: none; }
  .bl { bottom: -4px; left: -4px; border-right: none; border-top: none; }
  .br { bottom: -4px; right: -4px; border-left: none; border-top: none; }

  .gallery-item:hover .tl { transform: translate(-2px, -2px); }
  .gallery-item:hover .tr { transform: translate(2px, -2px); }
  .gallery-item:hover .bl { transform: translate(-2px, 2px); }
  .gallery-item:hover .br { transform: translate(2px, 2px); }

  /* Index number - very subtle */
  .image-index {
    position: absolute;
    bottom: -1.75rem;
    right: 0.5rem;
    font-family: 'Space Mono', monospace;
    font-size: 0.65rem;
    color: rgb(var(--color-secondary) / 0.15);
    transition: color 0.3s, opacity 0.3s;
    opacity: 0.6;
  }

  .gallery-item:hover .image-index {
    color: rgb(var(--color-secondary) / 0.4);
    opacity: 1;
  }

  /* Empty state */
  .empty-state {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 60vh;
  }

  .ascii-box {
    font-family: 'Space Mono', monospace;
    font-size: 0.75rem;
    color: rgb(var(--color-secondary) / 0.4);
    line-height: 1.5;
  }

  /* Footer */
  .gallery-footer {
    position: relative;
    z-index: 10;
    padding: 4rem 0 3rem;
    display: flex;
    justify-content: center;
  }

  /* Larvitar */
  .larvitar-home-link {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-decoration: none;
    gap: 0.75rem;
  }

  .larvitar-wrapper { position: relative; }

  .larvitar-svg {
    animation: bob 3s ease-in-out infinite;
  }

  @keyframes bob {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-5px) rotate(1deg); }
  }

  .larvitar-eyes-awake { opacity: 1; transition: opacity 0.2s; }
  .larvitar-eyes-happy { opacity: 0; transition: opacity 0.2s; }
  .larvitar-home-link:hover .larvitar-eyes-awake { opacity: 0; }
  .larvitar-home-link:hover .larvitar-eyes-happy { opacity: 1; }
  .larvitar-home-link:hover .larvitar-svg { animation: wiggle 0.3s infinite; }

  @keyframes wiggle {
    0%, 100% { transform: rotate(-4deg); }
    50% { transform: rotate(4deg); }
  }

  .heart-container {
    position: absolute;
    top: -8px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 12px;
    opacity: 0;
    transition: opacity 0.3s;
  }

  .larvitar-home-link:hover .heart-container { opacity: 1; }

  .heart {
    color: #e77;
    font-size: 14px;
    animation: float-heart 1.2s ease-in-out infinite;
  }

  .heart:nth-child(2) { animation-delay: 0.4s; }

  @keyframes float-heart {
    0%, 100% { transform: translateY(0); opacity: 0.7; }
    50% { transform: translateY(-12px); opacity: 1; }
  }

  .home-text {
    font-family: 'Space Mono', monospace;
    font-size: 0.75rem;
    color: rgb(var(--color-secondary) / 0.35);
    opacity: 0;
    transform: translateY(-5px);
    transition: all 0.3s ease;
  }

  .larvitar-home-link:hover .home-text {
    opacity: 1;
    transform: translateY(0);
  }

  /* Modal */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgb(var(--color-primary) / 0.96);
    backdrop-filter: blur(8px);
    z-index: 2000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s;
  }

  .modal-overlay.active {
    opacity: 1;
    visibility: visible;
  }

  .modal-content {
    position: relative;
    max-width: 92vw;
    max-height: 92vh;
  }

  .modal-close {
    position: absolute;
    top: -3rem;
    right: 0;
    background: none;
    border: none;
    font-size: 2rem;
    font-weight: 300;
    color: rgb(var(--color-secondary) / 0.4);
    cursor: pointer;
    transition: color 0.2s, transform 0.2s;
    line-height: 1;
  }

  .modal-close:hover {
    color: rgb(var(--color-secondary));
    transform: rotate(90deg);
  }

  .modal-frame {
    background: rgb(var(--color-primary));
    padding: 0.75rem;
    border: 1px solid rgb(var(--color-secondary) / 0.08);
    transform: scale(0.96);
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .modal-overlay.active .modal-frame {
    transform: scale(1);
    opacity: 1;
  }

  .modal-frame img {
    display: block;
    max-width: 85vw;
    max-height: 80vh;
    width: auto;
    height: auto;
  }

  .modal-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 0.75rem;
    font-family: 'Space Mono', monospace;
    font-size: 0.7rem;
  }

  .modal-title {
    color: rgb(var(--color-secondary) / 0.6);
    text-transform: capitalize;
  }

  .modal-number {
    color: rgb(var(--color-secondary) / 0.3);
  }

  /* Tablet */
  @media (max-width: 1024px) {
    .gallery-grid {
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 3rem 2rem;
    }
  }

  /* Mobile */
  @media (max-width: 768px) {
    .gallery-main {
      padding: 4rem 3vw 6rem;
    }

    .gallery-grid {
      gap: 2.5rem 1.5rem;
      grid-template-columns: repeat(2, 1fr);
    }

    .gallery-item {
      transform: rotate(calc(var(--rotation) * 0.5));
    }

    .floating-ascii {
      font-size: 6px;
      opacity: 0.5;
    }

    .image-container {
      aspect-ratio: 1 / 1;
    }

    /* Nav mobile */
    .gallery-nav {
      padding: 1rem;
    }

    .nav-container {
      gap: 0.35rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    .nav-btn {
      padding: 0.4rem 0.6rem;
      font-size: 0.7rem;
    }

    .nav-count {
      font-size: 0.5rem;
    }

    .nav-divider {
      display: none;
    }

    /* Quotes mobile */
    .quotes-grid {
      padding: 2rem 1rem;
      gap: 2rem;
    }

    .quote-container {
      padding: 1.5rem;
    }

    .quote-text {
      font-size: 1rem;
      line-height: 1.6;
    }

    .quote-mark {
      font-size: 1.25em;
    }

    .quote-author {
      font-size: 0.75rem;
    }

    .quote-source {
      font-size: 0.65rem;
    }

    /* Quote cards in grid - mobile */
    .quote-text-card {
      font-size: 0.75rem;
      padding: 0.75rem 0.25rem;
    }

    .quote-mark-large {
      font-size: 2.5rem;
    }

    /* Video mobile */
    .video-play-icon {
      font-size: 1.25rem;
      width: 2.25rem;
      height: 2.25rem;
    }

    /* Image index labels - truncate long names */
    .image-index {
      font-size: 0.55rem;
      max-width: 90%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    /* Modal mobile */
    .modal-content {
      padding: 1rem;
    }

    .modal-frame img {
      max-height: 60vh;
    }
  }

  @media (max-width: 480px) {
    .gallery-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 2rem 1rem;
    }

    .nav-container {
      gap: 0.25rem;
    }

    .nav-btn {
      padding: 0.35rem 0.5rem;
      font-size: 0.6rem;
      letter-spacing: 0.05em;
    }

    .nav-count {
      display: none;
    }

    .quote-text-card {
      font-size: 0.7rem;
      -webkit-line-clamp: 4;
    }

    .quote-author-card {
      font-size: 0.5rem;
    }

    .quote-mark-large {
      font-size: 2rem;
    }

    .video-play-icon {
      font-size: 1.2rem;
      width: 2rem;
      height: 2rem;
    }

    .image-index {
      font-size: 0.5rem;
      max-width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .corner {
      width: 8px;
      height: 8px;
    }

    .gallery-item:hover .corner.tl { transform: translate(-2px, -2px); }
    .gallery-item:hover .corner.tr { transform: translate(2px, -2px); }
    .gallery-item:hover .corner.bl { transform: translate(-2px, 2px); }
    .gallery-item:hover .corner.br { transform: translate(2px, 2px); }
  }
</style>

<script define:vars={{ asciiPatterns }}>
  document.addEventListener('DOMContentLoaded', () => {
    const items = document.querySelectorAll('.gallery-item');
    const modal = document.getElementById('modalOverlay');
    const modalImg = document.getElementById('modalImage');
    const modalClose = document.getElementById('modalClose');
    const modalTitle = document.getElementById('plaqueTitle');
    const modalNumber = document.getElementById('plaqueNumber');
    const asciiForeground = document.getElementById('asciiForeground');

    // ===== MODE NAVIGATION =====
    const navBtns = document.querySelectorAll('.nav-btn');
    const contentGrid = document.getElementById('contentGrid');
    const allItems = document.querySelectorAll('.gallery-item');
    const videoCards = document.querySelectorAll('.video-card');

    function setMode(mode) {
      // Update button states
      navBtns.forEach(btn => {
        btn.classList.toggle('active', btn.dataset.mode === mode);
      });

      // Show/hide items based on mode (using category)
      allItems.forEach(item => {
        const category = item.dataset.category;
        if (mode === 'all') {
          item.style.display = '';
        } else {
          item.style.display = category === mode ? '' : 'none';
        }
      });

      // Re-trigger animations
      allItems.forEach((item, i) => {
        if (item.style.display !== 'none') {
          item.style.animation = 'none';
          item.offsetHeight; // Trigger reflow
          item.style.animation = '';
        }
      });
    }

    // Initialize
    setMode('all');

    // Nav button click handlers
    navBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        setMode(btn.dataset.mode);
      });
    });

    // Video hover play
    videoCards.forEach(card => {
      const video = card.querySelector('video');
      if (video) {
        card.addEventListener('mouseenter', () => {
          video.play().catch(() => {});
        });
        card.addEventListener('mouseleave', () => {
          video.pause();
          video.currentTime = 0;
        });
      }
    });

    // Spawn random ASCII in foreground - across ENTIRE viewport
    function spawnAscii(count = 1) {
      for (let i = 0; i < count; i++) {
        const pattern = asciiPatterns[Math.floor(Math.random() * asciiPatterns.length)];
        const pre = document.createElement('pre');
        pre.textContent = pattern;
        // Truly random across full viewport
        pre.style.left = `${2 + Math.random() * 96}%`;
        pre.style.top = `${2 + Math.random() * 96}%`;
        pre.style.fontSize = `${7 + Math.random() * 7}px`;
        asciiForeground?.appendChild(pre);
        
        setTimeout(() => pre.remove(), 3500);
      }
    }

    // Spawn ASCII regularly - more frequently
    setInterval(() => spawnAscii(Math.random() > 0.3 ? 2 : 1), 1200);
    
    // Spawn burst on scroll
    let scrollTimeout;
    let lastScroll = 0;
    window.addEventListener('scroll', () => {
      clearTimeout(scrollTimeout);
      const now = Date.now();
      if (now - lastScroll > 200) {
        spawnAscii(3);
        lastScroll = now;
      }
      scrollTimeout = setTimeout(() => spawnAscii(2), 100);
    });

    // Parallax on scroll
    let ticking = false;
    window.addEventListener('scroll', () => {
      if (!ticking) {
        requestAnimationFrame(() => {
          const scrollY = window.scrollY;
          items.forEach((item, i) => {
            const speed = 0.015 + (i % 4) * 0.008;
            const yOffset = scrollY * speed;
            item.style.transform = `rotate(var(--rotation)) translateY(${-yOffset}px)`;
          });
          ticking = false;
        });
        ticking = true;
      }
    });

    // Click handlers - for images, books, and videos
    items.forEach((item, i) => {
      const type = item.dataset.type;
      // Only add modal for image-like items (jpg, png, book)
      if (!['jpg', 'png', 'book'].includes(type || '')) return;
      
      const open = () => {
        const src = item.dataset.src;
        if (src && modalImg && modalTitle && modalNumber) {
          modalImg.src = src;
          const name = src.split('/').pop()?.replace(/\.[^/.]+$/, '') || 'Untitled';
          modalTitle.textContent = name.replace(/[-_]/g, ' ');
          const prefix = type === 'book' ? 'BOOK' : type?.toUpperCase() || 'IMG';
          modalNumber.textContent = `${prefix}.${String(item.dataset.index ? parseInt(item.dataset.index) + 1 : i + 1).padStart(2, '0')}`;
          modal?.classList.add('active');
          document.body.style.overflow = 'hidden';
        }
      };

      item.addEventListener('click', open);
      item.addEventListener('touchend', (e) => { e.preventDefault(); open(); });
    });

    const close = () => {
      modal?.classList.remove('active');
      document.body.style.overflow = '';
      setTimeout(() => { if (modalImg) modalImg.src = ''; }, 300);
    };

    modalClose?.addEventListener('click', close);
    modal?.addEventListener('click', (e) => { if (e.target === modal) close(); });
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') close(); });
  });
</script>

<!-- SVG Filters for clean digital glitch (no color tint) -->
<svg style="position: absolute; width: 0; height: 0;" aria-hidden="true">
  <defs>
    <filter id="glitch-r">
      <feColorMatrix type="matrix" values="1.2 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0"/>
      <feOffset dx="-3" dy="0" />
    </filter>
    <filter id="glitch-c">
      <feColorMatrix type="matrix" values="1 0 0 0 0  0 1.2 0 0 0  0 0 1.2 0 0  0 0 0 1 0"/>
      <feOffset dx="3" dy="0" />
    </filter>
  </defs>
</svg>
